<%- include('../partials/header') %>

<div style="width: 70%; margin: 0 auto">
  <h1 class="mb-4">Restaurantes Registados</h1>

  <table class="table table-striped table-bordered table-hover">
    <thead class="table-dark text-center">
      <tr>
        <th>#</th>
        <th>Nome</th>
        <th>Email</th>
        <th>Nº de pratos</th>
        <th>Gerir Restaurante</th>
        <th>Validado</th>
      </tr>
    </thead>
    <tbody class="text-center">
      <% restaurantes.forEach((rest, index) => { %>
      <tr>
        <td><%= index + 1 %></td>
        <td><%= rest.name %></td>
        <td><%= rest.email %></td>
        <td><%= rest.menu.length %></td>
        <td>
          <% if (session && session.user) { %>
            <a href="/restaurants/<%= rest._id %>/manage" class="btn btn-sm btn-outline-primary">Gerir</a>
          <% } else { %>
            <span class="text-muted">Login necessário</span>
          <% } %>
        </td>
        <td>
          <% if (rest.validado) { %>
            <span class="badge bg-success">Sim</span>
          <% } else { %>
            <span class="badge bg-danger">Não</span>
          <% } %>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>
</div>

<%- include('../partials/footer') %>
